<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Login/Register</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <link rel="stylesheet" href="../css/login.css">
  <style></style>
</head>
<body>
  <div class="d-flex justify-content-center align-items-center" style="min-height: 100vh;">
    <div class="auth-card">
      <div class="auth-card-header" id="auth-header">
        <div class="icon">
          <i class="fa-solid fa-paper-plane"></i>
        </div>
        <h2>Field Service Management</h2>
        <p id="auth-subtitle">Log in to your account</p>
      </div>
      <ul class="nav nav-pills nav-justified" id="authTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button class="nav-link active" id="login-tab" data-bs-toggle="pill" data-bs-target="#login-pane" type="button" role="tab" aria-controls="login-pane" aria-selected="true" onclick="setSubtitle('Log in to your account')">Login</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="register-tab" data-bs-toggle="pill" data-bs-target="#register-pane" type="button" role="tab" aria-controls="register-pane" aria-selected="false" onclick="setSubtitle('Create your account')">Register</button>
        </li>
      </ul>
      <div class="tab-content auth-card-body">
        <!-- Login Tab -->
        <div class="tab-pane fade show active" id="login-pane" role="tabpanel" aria-labelledby="login-tab">
          <form id="login-form">
            <div class="form-group">
              <label class="form-label" for="loginEmail">Email</label>
              <span class="input-icon"><i class="fa-regular fa-envelope"></i></span>
              <input type="email" class="form-control" id="loginEmail" placeholder="you@example.com" required>
            </div>
            <div class="form-group">
              <label class="form-label" for="loginPassword">Password</label>
              <span class="input-icon"><i class="fa-solid fa-lock"></i></span>
              <input type="password" class="form-control" id="loginPassword" placeholder="********" required>
            </div>
            <button type="submit" class="btn btn-primary w-100 mb-3">Sign In</button>
            <div id="login-feedback" class="text-center text-danger mb-2" style="display:none;"></div>
            <div class="auth-card-footer">
              <div class="mt-2">
                <a href="#" onclick="showForgotPassword(event)">Forgot Password?</a>
              </div>
            </div>
          </form>
        </div>
        <!-- Register Tab -->
        <div class="tab-pane fade" id="register-pane" role="tabpanel" aria-labelledby="register-tab">
          <form id="register-form">
            <div class="form-group">
              <label class="form-label" for="registerName">Full Name</label>
              <span class="input-icon"><i class="fa-regular fa-user"></i></span>
              <input type="text" class="form-control" id="registerName" placeholder="John Smith" required>
            </div>
            <div class="form-group">
              <label class="form-label" for="registerPhone">Phone</label>
              <span class="input-icon"><i class="fa-solid fa-phone"></i></span>
              <input type="text" class="form-control" id="registerPhone" placeholder="1234567890" required>
            </div>
            <div class="form-group">
              <label class="form-label" for="registerEmail">Email</label>
              <span class="input-icon"><i class="fa-regular fa-envelope"></i></span>
              <input type="email" class="form-control" id="registerEmail" placeholder="you@example.com" required>
            </div>
            <div class="form-group">
              <label class="form-label" for="registerLocation">Location</label>
              <span class="input-icon"><i class="fa-solid fa-map-marker-alt"></i></span>
              <input type="text" class="form-control" id="registerLocation" placeholder="City, State" required>
            </div>
            <div class="form-group">
              <label class="form-label" for="registerState">State</label>
              <span class="input-icon"><i class="fa-solid fa-flag"></i></span>
              <input type="text" class="form-control" id="registerState" placeholder="State" required>
            </div>
            <div class="form-group">
              <label class="form-label" for="registerPassword">Password</label>
              <span class="input-icon"><i class="fa-solid fa-lock"></i></span>
              <input type="password" class="form-control" id="registerPassword" placeholder="********" required>
            </div>
            <button type="submit" class="btn btn-primary w-100 mb-3">Create Account</button>
            <div id="register-feedback" class="text-center text-danger mb-2" style="display:none;"></div>
            <div class="auth-card-footer">
              <div class="mt-2">
                <a href="#" onclick="showLogin(event)">Already have an account? Sign in</a>
              </div>
            </div>
          </form>
        </div>
        <!-- Forgot Password Tab (hidden, not in pills) -->
        <div class="tab-pane fade" id="forgot-pane" role="tabpanel">
          <form id="forgot-password-form">
            <div class="form-group">
              <label class="form-label" for="forgotEmail">Email</label>
              <span class="input-icon"><i class="fa-regular fa-envelope"></i></span>
              <input type="email" class="form-control" id="forgotEmail" placeholder="you@example.com" required>
            </div>
            <button type="submit" class="btn btn-primary w-100 mb-3">Submit</button>
            <div id="forgot-feedback" class="text-center text-danger mb-2" style="display:none;"></div>
            <div class="auth-card-footer">
              <div class="mt-2">
                <a href="#" onclick="showLogin(event)">Already have an account? Sign in</a>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  <!-- Forgot Password Success Modal -->
  <div class="modal fade" id="forgotSuccessModal" tabindex="-1" aria-labelledby="forgotSuccessLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="forgotSuccessLabel">Verification Success</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p id="forgot-success-text">Your email has been verified.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" id="btnGoReset">Reset Password</button>
        </div>
      </div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
  <script src="../js/customerLogin.js"></script>
  <script>
    // 切换tab时同步副标题
    function setSubtitle(text) {
      document.getElementById('auth-subtitle').textContent = text;
    }
    // 保证页面刷新后副标题正确
    document.addEventListener('DOMContentLoaded', function() {
      const loginTab = document.getElementById('login-tab');
      const registerTab = document.getElementById('register-tab');
      if (registerTab.classList.contains('active')) {
        setSubtitle('Create your account');
      } else {
        setSubtitle('Log in to your account');
      }
    });

    // 显示Forgot Password界面
    function showForgotPassword(e) {
      e.preventDefault();
      // 隐藏pills
      document.getElementById('authTab').style.display = 'none';
      // 隐藏副标题
      setSubtitle('Forgot Password');
      // 隐藏所有tab-pane
      document.querySelectorAll('.tab-pane').forEach(pane => pane.classList.remove('show', 'active'));
      // 显示forgot-pane
      document.getElementById('forgot-pane').classList.add('show', 'active');
    }
    // 返回登录界面
    function showLogin(e) {
      e.preventDefault();
      document.getElementById('authTab').style.display = '';
      setSubtitle('Log in to your account');
      // 隐藏所有tab-pane
      document.querySelectorAll('.tab-pane').forEach(pane => pane.classList.remove('show', 'active'));
      // 显示login-pane
      document.getElementById('login-pane').classList.add('show', 'active');
      // 激活login tab
      document.getElementById('login-tab').classList.add('active');
      document.getElementById('register-tab').classList.remove('active');
    }
  </script>
</body>
</html>